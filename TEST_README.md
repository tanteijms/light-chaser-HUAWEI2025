# 华为嵌入式软件大赛代码测试工具

本工具用于自动化测试华为嵌入式软件大赛的C++代码，确保代码能够正确编译和运行。

## 📁 文件说明

- `quick_test.py` - 快速测试脚本，用于测试单个C++文件
- `test_runner.py` - 完整测试脚本，可以测试多个C++文件和数据文件
- `run_test.bat` - Windows批处理脚本，双击运行
- `test_report.txt` - 生成的测试报告文件

## 🚀 使用方法

### 方法1: 使用批处理脚本 (推荐)
直接双击 `run_test.bat` 文件即可运行测试。

### 方法2: 使用Python脚本
```bash
# 快速测试 (推荐先使用)
python quick_test.py

# 完整测试
python test_runner.py

# 指定项目目录的完整测试
python test_runner.py /path/to/project
```

## 📋 测试功能

### 快速测试 (`quick_test.py`)
- ✅ 自动编译 `preliminary/src/1.0.2_highest/main.cpp`
- ✅ 使用 `preliminary/src/data.in` 作为输入数据运行程序
- ✅ 显示编译和运行时间
- ✅ 保存输出到 `output.txt`
- ✅ 显示输出预览和统计信息

### 完整测试 (`test_runner.py`)
- 🔍 自动发现所有 `main.cpp` 文件
- 🔍 自动发现所有 `data.in` 测试数据文件
- 🔨 逐一编译所有C++文件
- 🏃 使用所有测试数据运行每个编译成功的程序
- 📊 生成详细的测试报告
- 💾 自动保存所有输出文件

## 🛠️ 环境要求

- Python 3.6+ 
- g++ 编译器 (MinGW-w64 或其他C++编译器)
- Windows 操作系统 (批处理脚本)

### 安装MinGW-w64
1. 下载 MinGW-w64: https://www.mingw-w64.org/
2. 将 `bin` 目录添加到系统 PATH 环境变量
3. 验证安装: 在命令行输入 `g++ --version`

## 📊 输出说明

### 测试状态
- ✅ 绿色对勾 = 成功
- ❌ 红色叉号 = 失败
- ⚠️ 黄色警告 = 部分失败

### 输出文件
- `output.txt` - 程序输出结果
- `output_[数据文件名].txt` - 使用特定数据文件的输出结果
- `test_report.txt` - 详细测试报告

## 🔧 编译选项

默认编译选项:
```bash
g++ -std=c++17 -O2 -Wall main.cpp -o main.exe
```

- `-std=c++17`: 使用C++17标准
- `-O2`: 启用优化
- `-Wall`: 显示所有警告

## ⏱️ 超时设置

- 编译超时: 30秒
- 运行超时: 60秒

如需修改，请编辑脚本中的 `timeout` 参数。

## 🐛 常见问题

### 1. 找不到g++编译器
```
❌ 找不到g++编译器!
请安装MinGW或确保g++在PATH中
```
**解决方法**: 安装MinGW-w64并添加到PATH环境变量

### 2. 编译失败
**可能原因**:
- 代码语法错误
- 缺少必要的头文件
- C++标准版本不兼容

**解决方法**: 检查编译错误信息，修复代码问题

### 3. 运行超时
**可能原因**:
- 算法效率问题
- 死循环
- 数据量过大

**解决方法**: 优化算法或增加超时时间

### 4. 找不到输入文件
**解决方法**: 确保 `data.in` 文件存在于正确的目录

## 📝 自定义配置

### 修改文件路径
编辑 `quick_test.py` 中的路径定义:
```python
cpp_file = Path("你的/cpp文件/路径/main.cpp")
data_file = Path("你的/数据文件/路径/data.in")
```

### 修改编译选项
编辑脚本中的 `compile_cmd` 列表来修改编译参数。

## 📈 性能监控

测试脚本会自动记录:
- 编译时间
- 运行时间
- 输出文件大小
- 内存使用情况 (间接通过运行时间推断)

## 🎯 最佳实践

1. **先运行快速测试**: 确保基本功能正常
2. **检查输出合理性**: 查看输出预览和统计信息
3. **分析测试报告**: 关注失败的测试用例
4. **优化性能**: 关注运行时间，优化算法
5. **多次测试**: 确保结果的一致性

---

🎉 **祝您在华为嵌入式软件大赛中取得优异成绩!**
